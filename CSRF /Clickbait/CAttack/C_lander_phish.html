<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bait / Lander — voucher email</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{ --txt:#0f172a; --muted:#475569; --ok:#16a34a; --bd:#e5e7eb; }
    *{box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;margin:0;background:#fff;color:var(--txt)}
    .wrap{max-width:920px;margin:0 auto;padding:22px}
    h1{font-size:44px;line-height:1.05;margin:18px 0 6px}
    .head{display:flex;align-items:center;gap:10px;border-bottom:1px solid var(--bd);padding:14px 0 10px;margin-bottom:6px}
    .boom{font-size:28px}
    label{display:block;margin:10px 0 6px;color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center}
    input[type="email"]{flex:1;padding:14px 16px;font-size:18px;border:1px solid var(--bd);border-radius:10px}
    button{padding:12px 16px;font-size:18px;border:1px solid var(--bd);border-radius:10px;background:#f8fafc;cursor:pointer}
    button:disabled, input:disabled{opacity:.6;cursor:not-allowed}
    .note{margin-top:14px;padding:12px 14px;border:1px solid #d1fae5;background:#ecfdf5;color:#065f46;border-radius:10px}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Enter your email to get the detail</h1>

    <form id="f">
      <label for="em">Email</label>
      <div class="row">
        <input id="em" type="email" placeholder="you@example.com" required />
        <button id="btn" type="submit">Submit</button>
      </div>
    </form>

    <div id="msg" class="note" style="display:none;"></div>
    <p class="muted" id="tip" style="margin-top:18px;"></p>
  </div>

<script>
(function(){
  const f   = document.getElementById('f');
  const em  = document.getElementById('em');
  const btn = document.getElementById('btn');
  const msg = document.getElementById('msg');
  const tip = document.getElementById('tip');

  function maskEmail(e){ return e.replace(/^(.)(.*)(@.*)$/, (_,a,b,c)=> a + '***' + c); }

  function setBusy(b){
    em.disabled = b; btn.disabled = b;
    btn.textContent = b ? 'Submitting…' : 'Submit';
  }

  f.addEventListener('submit', async (ev)=>{
    ev.preventDefault();
    const val = (em.value||'').trim();
    if(!val) return;

    setBusy(true);
    msg.style.display='block';
    msg.textContent = 'Thank you. Your request is being processed…';

    // 1) Write a teaching log (silent failure is acceptable; flow continues)
    try{
      await fetch('C_collect.php', {
        method:'POST',
        headers:{'Content-Type':'application/x-www-form-urlencoded'},
        body: 'email=' + encodeURIComponent(val)
      });
    }catch(_){}

    // 2) Notify the RIGHT attack panel that an email was collected via clickbait
    try{
      window.parent.postMessage(
        { type:'CLICKBAIT_CHAIN', value:'phish', emailMasked: maskEmail(val) },
        '*'
      );
    }catch(_){}

    // 3) Show a user-facing confirmation and simulate a platform jump (to keep the lure going)
    msg.textContent = 'Thanks! We received your request.';
    tip.textContent = 'You will receive an email if you are eligible.';

    // 4) After 1.8s, auto-redirect to the ads/download lander to demonstrate the second stage in the same chain
    setTimeout(()=>{
      location.href = 'C_lander_ads.html?from=upsell';
    }, 1800);
  });
})();
</script>
</body>
</html>
